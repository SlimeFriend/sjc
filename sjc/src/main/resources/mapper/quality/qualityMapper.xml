<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sjc.app.quality.mapper.QualityMapper">
	<!-- 입고품질검사 대기목록 1 (mtlOd)-->
	<select id="selectMtlOd" resultType="InspectionVO">
		SELECT 	distinct(o.mtl_od_code) mtl_od_code
        		, o.cp_code    			cp_code
        		, c.cp_name 			cp_name
        		, o.mtl_od_quantity 	mtl_od_quantity
        		, o.mtl_od_date 		mtl_od_date
        		, o.dilivery_date 		dilivery_date
        		, o.price 				price
        		, o.user_id 			user_id
        		, o.mtl_od_status 		mtl_od_status
        		, o.comm 				comm
        FROM 	mtl_od o
        	JOIN 	cp c
        	ON 		o.cp_code = c.cp_code
        	JOIN 	mtl_od_detail od
        	ON 		od.mtl_od_code = o.mtl_od_code
        WHERE 	o.mtl_od_status ='입고품질검사대기' -- 완료
        OR		(
        			o.mtl_od_status = '입고품질검사중'
        			and     
        			od.MTL_OD_DETAIL_STATUS  is null
        		)
	</select>
	
	<!-- 입고품질검사 대기목록 2 (mtlOdDetail) -->
	<select id="selectMtlOdDetail" parameterType="String" resultType="map">
	    SELECT 	d.mtl_od_code  			AS "mtlOdCode"
	        	, d.mtl_od_detail_code 	AS "mtlOdDetailCode"
	        	, d.mt_code 			AS "mtCode"
	        	, d.quantity 			AS "mtlOdDetailQuantity"
	        	, m.mt_name 			AS "mtName"
	        	, m.material_type 		AS "materialType"
	        	, m.specification 		AS "specification"
	        	, m.unit 				AS "unit"
	        	, m.unit_price 			AS "unitPrice"
		FROM 	mtl_od_detail d
			JOIN 	mt m
			ON 		d.mt_code = m.mt_code
		WHERE 	d.mtl_od_code = #{mtlOdCode}
		and 	d.mtl_od_detail_status is null
	</select>
	

	
<!-- Update Status (mtlOd, mtlOdDetail) -->
	<update id="updateMtlOdStatus">
		UPDATE mtl_od
		SET mtl_od_status = '입고품질검사중'
		WHERE mtl_od_code = (SELECT mtl_od_code
							 FROM mtl_od_detail
							 WHERE mtl_od_detail_code = #{mtlOdDetailCode}
							)
	</update>
	

	<update id="updateMtlOdDetailStatus">
		UPDATE mtl_od_detail
		SET mtl_od_detail_status = '개별입고품질검사중'
		WHERE mtl_od_detail_code = #{mtlOdDetailCode}
	</update>

	
	
	
<!--자재 Inspection insert 여부 조회 (mtl_od_detail_code) -->
	<select id="whetherInspection" resultType="Integer">
		SELECT count(1)
		FROM inspection
		WHERE mtl_od_detail_code = #{mtlOdDetailCode}
	</select>

	
<!--자재 insert Inspection  -->
	<insert id="insertInspection" parameterType="InspectionVO">
	    <selectKey keyProperty="insCode" order="BEFORE" resultType="string">
	        SELECT 'INS' || TO_CHAR(SYSDATE, 'YYYYMMDD') || LPAD(INS_SEQ.NEXTVAL, 4, '0') 
	        FROM dual
	    </selectKey>
	    INSERT INTO inspection (
		        ins_code
		        , ins_date
		        , ins_status
		        , mtl_od_detail_code
		    )
		    VALUES ( 
		    		#{insCode}
		        	, SYSDATE
		        	, '검사중'
		        	, #{mtlOdDetailCode}
		    )
	</insert>
	

<!-- 자재품질검사등록모달-inspection 데이터 출력 -->
	<select id="selectInspection" resultType="InspectionVO">
			SELECT i.ins_code 					AS "insCode"
			        , i.ins_date 				AS "insDate"
			        , i.ins_status 				AS "insStatus"
			        , i.user_id 				AS "userId"
			        , i.user_name 				AS "userName"
			        , i.number_of_tests 		AS "numberOfTests"
			        , i.number_of_passes 		AS "numberOfPasses"
			        , i.number_of_failed 		AS "numberOfFailed"
			        , i.number_of_total_pass 	AS "numberOfTotalPass"
			        , i.total_pass 				AS "totalPass"
			        , i.mtl_od_detail_code 		AS "mtlOdDetailCode"
			        , mod.quantity 				AS "mtlOdDetailQuantity"
			 FROM 	inspection i
			 JOIN	mtl_od_detail mod
			 ON		mod.mtl_od_detail_code = i.mtl_od_detail_code
	         WHERE i.mtl_od_detail_code = #{mtlOdDetailCode}
	</select>

	

	
	
	<!-- 자재 insDetail insert 여부 조회 (mtl_od_detail_code)  -->
	<select id="countInsItem" resultType="Integer">
		SELECT count(1)
		FROM ins_detail d
		JOIN inspection i
		ON	i.ins_code = d.ins_code
        JOIN mtl_od_detail mod
        ON  i.mtl_od_detail_code = mod.mtl_od_detail_code
		WHERE i.mtl_od_detail_code =  #{mtlOdDetailCode}
	</select>

	

<!-- 자재입고품질검사모달창 insItem 목록 출력 -->
	<select id="selectTestDetail" resultType="InspectionVO">
		SELECT  im.mt_code mt_code
        ,ii.ins_item_code ins_item_code
        ,ii.ins_item_name ins_item_name
        ,ii.ins_item_citeria ins_item_citeria
		FROM    ins_map im
		JOIN    ins_item ii
		ON      im.ins_item_code = ii.ins_item_code
		WHERE   im.mt_code = (
					    select  mt_code
					    from    mtl_od_detail
					    where   MTL_OD_DETAIL_CODE = #{mtlOdDetailCode}
					)
	</select>
	<!-- 자재,완제품 insDetail insert -->
	<insert id="insertInsDetail" parameterType="InspectionVO">
	    <selectKey keyProperty="insDetailCode" order="BEFORE" resultType="string">
	        SELECT 'INSD' || TO_CHAR(SYSDATE, 'YYYYMMDD') || LPAD(INS_DETAIL_SEQ.NEXTVAL, 4, '0') 
	        FROM dual
	    </selectKey>
	
	    INSERT INTO ins_detail 
		                ( ins_detail_code
		                	, ins_code
		                )
		VALUES          ( #{insDetailCode}
		                	, #{insCode}
		                )
	</insert>

	<!-- 자재입고품질검사모달창, 완제품품질검사모달창 insDetail 목록 출력 -->
	<select id="selectInsDetailList" resultType="InspectionVO">
		SELECT ins_detail_code	AS "insDetailCode"
				, ins_code		AS "insCode"
				, ins_value		AS "insValue"
				, ins_result 	AS "insResult"
		FROM	ins_detail
		WHERE	ins_code = #{insCode}
	</select>

	
	
	<!-- insDetail 값 입력 -->
	<update id="updateInsValue">
		UPDATE 	ins_detail
		SET   	ins_value = #{insValue}
				, ins_result = #{insResult}
				, ins_item_code = #{insItemCode}
		WHERE 	ins_detail_code = #{insDetailCode}
	</update>
	<!-- 입고검사 최종등록(Update) -->
	<update id="updateIns">
		UPDATE	inspection
		SET		ins_status = '검사완료'
				, user_id = #{userId}
				, user_name = #{userName}
				, number_of_tests = #{numberOfTests}
			    , number_of_passes = #{numberOfPasses}
			    , number_of_failed = #{numberOfFailed}
			    , total_pass = #{totalPass}
			    , number_of_total_pass = #{numberOfTotalPass}
		WHERE 	ins_code = #{insCode}
	</update>
	
	
	
<!--  // 자재품질검사모달창 - mtl_od.mtl_od_status 입고품질검사완료 -->
	<update id="updateMtlOdSt" parameterType="InspectionVO">
		UPDATE mtl_od
		SET mtl_od_status = '입고품질검사완료'
		WHERE mtl_od_code = ( SELECT mtl_od_code
								FROM mtl_od_detail
								WHERE mtl_od_detail_code = #{mtlOdDetailCode})
	</update>
<!--  // 자재품질검사모달창 - mtl_od_detail.mtl_od_detail_status 개별입고품질검사완료 -->
	<update id="updateMtlOdDetailSt" parameterType="InspectionVO">
		UPDATE mtl_od_detail
		SET mtl_od_detail_status = '개별입고품질검사완료'
		WHERE mtl_od_detail_code = #{mtlOdDetailCode}
	</update>
	
	
	
	<select id="selectInsDetail" resultType="InspectionVO">
			SELECT ins_detail_code
		                    , ins_item_code
		                    , ins_value
		                    , ins_result
		                    , ins_code
			 FROM ins_detail
	         WHERE ins_code = #{insCode}
	</select>
		

	
	
	
	
	
	
	
	<select id="selectTest" resultType="InspectionVO">
		SELECT i.ins_item_name
		        , i.ins_item_citeria
		        , i.ins_item_code
		FROM ins_item i
		JOIN ins_map m
		ON m.ins_item_code = i.ins_item_code
		WHERE m.mt_code = #{mtCode}
	</select>
	
	



	<!-- 완료목록페이지 -->
	<!-- 입고 -->
	<select id="selectQualityDoneInfo" resultType="InspectionVO">
		SELECT 	i.ins_date					AS "insDate"
		        , i.ins_code				AS "insCode"
		        , i.ins_status				AS "insStatus"
		        , cmo.mtl_od_status			AS "mtlOdStatus"
		        , cmod.mtl_od_detail_status	AS "mtlOdDetailStatus"
		        , cm.mt_name				AS "mtName"
		        , cm.specification			AS "specification"
		        , i.number_of_tests			AS "numberOfTests"
		        , i.number_of_passes		AS "numberOfPasses"
		        , i.number_of_total_pass	AS "numberOfTotalPass"
		        , i.total_pass				AS "totalPass"
		        , cmo.mtl_od_code			AS "mtlOdCode"
		        , cmod.mtl_od_detail_code	AS "mtlOdDetailCode"
		        , cm.mt_code				AS "mtCode"
		        , i.user_id					AS "userId"
		        , cmo.cp_code				AS "cpCode"
		FROM    mt cm
		JOIN    mtl_od_detail cmod
		ON      cmod.mt_code = cm.mt_code
        JOIN    mtl_od cmo
        ON      cmo.mtl_od_code = cmod.mtl_od_code
		JOIN    inspection i
		ON      cmod.mtl_od_detail_code = i.mtl_od_detail_code
		WHERE   i.ins_status = '검사완료'
		        and cmo.mtl_od_status = '입고품질검사완료'
		        and cmo.mtl_od_status not in ('반품', '입고완료')
	</select>
	
<!--  // 입고검사완료페이지 - 입고처리 버튼 - mtl_od.mtl_od_status 입고완료 -->
	<update id="updateMtlOdDone" parameterType="InspectionVO">
		UPDATE mtl_od
		SET mtl_od_status = '입고완료'
		WHERE mtl_od_code = #{mtlOdCode}
	</update>
	
	<insert id="insertMtInInfo" parameterType="InspectionVO">
	    <selectKey keyProperty="inCode" order="BEFORE" resultType="string">
	        SELECT 'IN' || TO_CHAR(SYSDATE, 'YYYYMMDD') || LPAD(MT_IN_SEQ.NEXTVAL, 4, '0') 
	        FROM dual
	    </selectKey>
		    INSERT INTO mt_in (
						        input_date,
						        inquantity, 
						        ed, 
						        in_code, 
						        user_id, 
						        mtl_od_code, 
						        ins_code, 
						        mt_code, 
						        cp_code, 
						        comm, 
						        lot_no
						    )
		    VALUES 			(
						        SYSDATE,
						        #{numberOfTotalPass},
						        ADD_MONTHS(SYSDATE, 6),
						        #{inCode},
						        #{userId},
						        #{mtlOdCode},
						        #{insCode},
						        #{mtCode},
						        #{cpCode},
						        #{mtInComm},
						        'L' || TO_CHAR(SYSDATE, 'YYYYMMDD') || LPAD(MT_IN_SEQ.CURRVAL, 4, '0')
						    )
	</insert>
	
	
	
	



	








	<select id="selectQualityWaitInfo" resultType="MtlOdVO">
		SELECT mtl_od_code
               , mtl_od_quantity
               , mtl_od_date
               , dilivery_date
               , price
               --, mt_code 수정해야함 수정해야함수정해야함수정해야함수정해야함수정해야함수정해야함수정해야함수정해야함수정해야함수정해야함수정해야함수정해야함
               , cp_code
               , user_id
               , mtl_od_status


		--FROM copy_mtl_od
		FROM mtl_od
		WHERE mtl_od_status = '입고품질검사대기'

	</select>

	
	<select id="selectQualityRegistrationInfo" resultType="InspectionVO">
		SELECT i.ins_code ins_code
		       , i.ins_status
		       , i.ins_type_code
		       , o.mtl_od_code
		       , o.mtl_od_quantity
		       , o.mtl_od_date
		       , o.dilivery_date
		       , o.price
		       , o.mt_code
		       , o.cp_code
		       , m.mt_name
		--FROM copy_mtl_od o
		FROM mtl_od o
		    JOIN inspection i
		        ON o.mtl_od_code = i.mtl_od_code
		    --JOIN copy_mt m
		    JOIN mt m
		        ON o.mt_code = m.mt_code
		 WHERE
		 	o.mtl_od_code = #{mtlOdCode}
		 
	</select>
	
	<select id="selectQualityTestInfo" resultType="InspectionVO">
		SELECT  i.ins_item_name ins_item_name
        		,i.ins_item_citeria ins_item_citeria
                , d.ins_value
                , d.ins_result
        FROM ins_detail d
        JOIN ins_item i
        ON d.ins_item_code = i.ins_item_code
        WHERE i.ins_type_code = (SELECT material_type_code
                                 --FROM copy_mt
                                 FROM mt
                                 WHERE mt_code = (
                                                        SELECT MATERIAL_TYPE
                                                        --FROM    copy_mt
                                                        FROM    mt
                                                        WHERE   mt_code = (
                                                                            SELECT  mt_code
                                                                            FROM    mtl_od
                                                                            WHERE   mtl_od_code = #{mtlOdCode}
                                                                            )
                                                        )
                                                        
                                )
	</select>


<!--   // 입고등록페이지 - 저장버튼 - inspection.ins_status 검사완료 -->
	<update id="updateInspectionDone" parameterType="InspectionVO">
		UPDATE inspection
		SET ins_status = '검사완료'
		WHERE mtl_od_code = #{mtlOdCode}
	</update>



<!--  // 입고검사완료페이지 - 반품처리 버튼 - mtl_od.mtl_od_status 반품 -->
	<update id="updateMtlOdBack" parameterType="InspectionVO">
		UPDATE mtl_od
		SET mtl_od_status = '반품'
		WHERE mtl_od_code = ( SELECT mtl_od_code
                                FROM  mtl_od_detail
                                WHERE mtl_od_detail_code = ( SELECT mtl_od_detail_code
                                                             FROM   inspection
                                                             WHERE ins_code =  #{insCode}
                                                             )
                                )
	</update>
	
	
	<!-- 자재입고테이블 -->

	<select id="selectMtIn" resultType="InspectionVO">
		SELECT  i.number_of_passes
	        , i.user_id
	        , i.ins_code
	        , o.mtl_od_code
	        , cmod.mt_code
	        , o.cp_code
		FROM inspection i
		JOIN mtl_od_detail cmod
		ON   cmod.mtl_od_detail_code = i.mtl_od_detail_code
		JOIN mtl_od o
		    on cmod.mtl_od_code = o.mtl_od_code
		WHERE o.mtl_od_status = '입고완료'
	</select>
	
	























	<!-- 완제품품질검사 대기목록1 -->
	<select id="selectPOrder" resultType="InspectionVO">
		SELECT  po.porder_code          AS "porderCode"
		        , MAX(po.plan_code)     AS "planCode"
		        , SUM(pd.output)        AS "output"
		        , MIN(pd.no)            AS "pdetailNo"
		        , MAX(u.user_name)      AS "userName"
		FROM    porder po
		JOIN    pdetail pd
		ON      pd.porder_code = po.porder_code
		JOIN    sjc_user u
		ON      u.user_id = po.manager
		WHERE   po.status = 'b3'
		GROUP BY po.porder_code
	</select>
	<!-- 완제품품질검사 대기목록2(porder_code) -->
	<select id="selectPDetail" parameterType="String" resultType="map">
		SELECT pd.pdetail_code 	AS "pdetailCode"
        		,po.porder_code AS "porderCode"
				, pd.prd_code 	AS "prdCode"
		        , pd.prd_name 	AS "prdName"
		        , pd.output 	AS "output"
				, pd.line_code 	AS "lineCode"
		        , pd.status 	AS "pdetailStatus"
		        , pd.no 		AS "pdetailNo"
		FROM pdetail pd
		JOIN porder po
		ON po.porder_code = pd.porder_code
		WHERE po.porder_code = #{porderCode}
		AND     pd.status = 'b3'
	</select>
<!-- Update Status (porder, pdetail) -->
	<update id="updatePOrderStatus">
		UPDATE porder
		SET status = '완제품품질검사중'
		WHERE porder_code = (SELECT porder_code
							 FROM pdetail
							 WHERE pdetail_code = #{pdetailCode							)
	</update>
	
	<update id="updatePDetailStatus">
		UPDATE pdetail
		SET status = '개별완제품품질검사중'
		WHERE pdetail_code = #{pdetailCode}
	</update>

<!--완제품 Inspection insert 여부 조회 (pdetail_code) -->
	<select id="cntPDtlIns" resultType="Integer">
		SELECT count(1)
		FROM inspection
		WHERE pdetail_code = #{pdetailCode}
	</select>
	
	
<!--완제품 insert Inspection  -->
	<insert id="insertPDtlIns" parameterType="InspectionVO">
	    <selectKey keyProperty="insCode" order="BEFORE" resultType="string">
	        SELECT 'INS' || TO_CHAR(SYSDATE, 'YYYYMMDD') || LPAD(INS_SEQ.NEXTVAL, 4, '0') 
	        FROM dual
	    </selectKey>
	    INSERT INTO inspection (
		        ins_code
		        , ins_date
		        , ins_status
		        , pdetail_code
		    )
		    VALUES ( 
		    		#{insCode}
		        	, SYSDATE
		        	, '검사중'
		        	, #{pdetailCode}
		    )
	</insert>
<!-- 완제품품질검사등록모달-inspection 데이터 출력 -->
	<select id="selectPDtlIns" resultType="InspectionVO">
			SELECT 	i.ins_code		  			AS "insCode"
			        , i.ins_date		  		AS "insDate"
			        , i.ins_status				AS "insStatus"
			        , i.user_id		  			AS "userId"
			        , i.user_name		  		AS "userName"
			        , i.number_of_tests			AS "numberOfTests"
			        , i.number_of_passes		AS "numberOfPasses"
			        , i.number_of_failed		AS "numberOfFailed"
			        , i.number_of_total_pass	AS "numberOfTotalPass"
			        , i.total_pass		  		AS "totalPass"
			        , i.pdetail_code		  	AS "pdetailCode"
			        , pd.output		  			AS "output"
			 FROM 	inspection i
			 JOIN	pdetail pd
			 ON		i.pdetail_code = pd.pdetail_code
	         WHERE 	i.pdetail_code = #{pdetailCode}
	</select>
	

	
	
	<!-- 완제품 insDetail  insert 여부 조회 (pdetail_code) -->
	<select id="countInsItem2" resultType="Integer">
		SELECT 	count(1)
		FROM 	ins_detail d
		JOIN 	inspection i
		ON		i.ins_code = d.ins_code
		JOIN	pdetail pd
		ON		i.pdetail_code = pd.pdetail_code
		WHERE 	i.pdetail_code =  #{pdetailCode}
	</select>
	

	<!-- 완제품품질검사모달창 insItem 목록 출력 -->
	<select id="selectPDtlTest" resultType="InspectionVO">
		SELECT  ipm.prd_code			AS "prdCode"
        		,ii.ins_item_code		AS "insItemCode"
        		,ii.ins_item_name		AS "insItemName"
        		,ii.ins_item_citeria	AS "insItemCiteria"
		FROM    ins_prd_map ipm
		JOIN    ins_item ii
		ON      ipm.ins_item_code = ii.ins_item_code
		WHERE   ipm.prd_code = (
					    SELECT  prd_code
					    FROM    pdetail
					    WHERE   pdetail_code = #{pdetailCode}
					)
	</select>


	
	
	

<!--  // 완제품품질검사모달창 - pdetail.status 개별완제품품질검사완료 -->
	<update id="updatePdSt" parameterType="InspectionVO">
		UPDATE pdetail
		SET status = '개별완제품품질검사완료'
		WHERE pdetail_code = #{pdetailCode}
	</update>
<!--  // 완제품품질검사모달창 - porder.status 완제품품질검사완료 -->
	<update id="updatePoSt" parameterType="InspectionVO">
		UPDATE porder
		SET status = '완제품품질검사완료'
		WHERE porder_code = ( SELECT porder_code
							  FROM	pdetail
							  WHERE pdetail_code=#{pdetailCode})
	</update>
	


		
		

	
	
	
	
	<select id="selectTest2" resultType="InspectionVO">
		SELECT i.ins_item_name
		        , i.ins_item_citeria
		        , i.ins_item_code
		FROM ins_item i
		JOIN ins_prd_map ipm
		ON ipm.ins_item_code = i.ins_item_code
		WHERE ipm.prd_code = #{prdCode}
	</select>



	



	
	<!-- 완제품품질검사 완료목록 1 -->
	<select id="selectOutDoneInfo1" resultType="PDetailVO">
		SELECT 	po.porder_code	    AS "porderCode"
                , po.status	        AS "porderStatus"
                , po.porder_date    AS "porderDate"
		        , po.start_date	    AS "startDate"
                , po.manager	    AS "manager"
		FROM    porder po
        JOIN    pdetail pd
        ON      po.porder_code = pd.porder_code
		JOIN    inspection i
		ON      i.pdetail_code = pd.pdetail_code
		WHERE   i.ins_status = '검사완료'
		        and po.status = '완제품품질검사완료'
		        and po.status not in ('반품', '입고완료')
	</select>
	<!-- 완제품품질검사 완료목록 2 -->
	<select id="selectOutDoneInfo2" resultType="InspectionVO">
		SELECT   i.ins_date			        AS "insDate"
		        , i.ins_status	            AS "insStatus"
                , i.number_of_tests 	    AS "numberOfTests"
		        , i.number_of_passes	    AS "numberOfPasses"
		        , i.number_of_total_pass    AS "numberOfTotalPass"
		        , i.total_pass	            AS "totalPass"
		        , i.user_id	                AS "userId"
                , i.ins_code	            AS "insCode"
                , p.prd_code	            AS "prdCode"
		        , p.prd_name	            AS "prdName"
		        , pd.pdetail_code	        AS "pdetailCode"
		        , pd.status	                AS "pdetailStatus"
                , pd.output	                AS "output"
                , pr.process_date           AS "processDate"
		FROM    prd p
		JOIN    pdetail pd
		ON      pd.prd_code = pd.prd_code
        JOIN    presult pr
        ON      pr.pdetail_code = pd.pdetail_code
        JOIN    porder po
        ON      po.porder_code = pd.porder_code
		JOIN    inspection i
		ON      i.pdetail_code = pd.pdetail_code
        WHERE     i.ins_status = '검사완료'
		AND     po.status = '완제품품질검사완료'
		AND     pd.status not in ('불량', '출고대기')
	</select>
	<!--  // 완제품품질검사완료페이지 - 입고처리 버튼 - pdetail.status 출고대기 -->
	<update id="updatePOrderDone" parameterType="InspectionVO">
		UPDATE pdetail
		SET status = '출고대기'
		WHERE pdetail_code = #{pDetailCode}
	</update>
	
	<insert id="insertPManage" parameterType="InspectionVO">
	    <selectKey keyProperty="lot" order="BEFORE" resultType="string">
	        SELECT 'PMG' || TO_CHAR(SYSDATE, 'YYYYMMDD') || LPAD(PRD_MANAGEMENT_SEQ.NEXTVAL, 4, '0') 
	        FROM dual
	    </selectKey>
		    INSERT INTO prd_management (
						        lot,
						        prd_code, 
						        md, 
						        ed, 
						        in_quantity,
						        ins_code,
						        in_date, 
						    )
		    VALUES 			(
						        
						        #{lot},
						        #{prdCode},
						        #{processDate},
						        ADD_MONTHS(SYSDATE, 6),
						        #{inQuantity},
						        #{insCode},
						        SYSDATE,
						    )
	</insert>







<!--   // 완제품품질검사완료페이지 - 저장버튼 - inspection.ins_status 검사완료 -->
	<update id="updateInspectionDone2" parameterType="InspectionVO">
		UPDATE inspection
		SET ins_status = '검사완료'
		WHERE pdetail_code = #{pDetailCode}
	</update>

<!--  // 완제품품질검사완료페이지 - 불량처리 버튼 - pdetail.status 반품 -->
	<update id="updatePdBack" parameterType="InspectionVO">
		UPDATE pdetail
		SET status = '불량'
		WHERE pdetail_code = ( SELECT pdetail_code
                                FROM   inspection
                                WHERE ins_code =  #{insCode}
                              )
	</update>
	
	
	









	


</mapper>