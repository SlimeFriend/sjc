<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{common/layouts/default_layout}"
      layout:fragment="Content">
<head>
    <meta charset="UTF-8">
    <title>자재 관리</title>
    <link rel="stylesheet" href="https://uicdn.toast.com/grid/latest/tui-grid.css" />
    <link rel="stylesheet" href="https://uicdn.toast.com/tui.pagination/latest/tui-pagination.css" />
    <script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>
    <script src="https://uicdn.toast.com/tui.pagination/latest/tui-pagination.js"></script>
</head>
<body>
	<div class="main-container">
		<div class="pd-ltr-20">
			<!-- 
			<h2 class="h2 mb-20">자재 관리</h2>
			 -->
			<div class="pd-20 card-box mb-20">
				<div class="d-flex justify-content-between align-items-center align-middle mb-20">
					<div>
				        <h2 class="h3 mb-0">검사항목 목록</h2>
					</div>
					<div>
					  <div class="d-flex align-items-center">
					    <div class="d-flex align-items-center">
							<label class="col-form-label h5 mr-3 text-nowrap">검사항목코드</label>
							<input class="form-control mr-3 w-25" type="text" id="inputMtCode" placeholder="자재코드 입력">
							<label class="col-form-label h5 mr-3 text-nowrap">검사항목명</label>
							<input class="form-control mr-3 w-25" type="text" id="inputMtName" placeholder="자재명 입력">
							<button class="btn btn-primary mr-3 text-nowrap" id="searchBtn">검색</button>
					    </div>
					  </div>
					</div>
					 <div>
				        <button class="btn btn-success mr-3" id="insertBtn">등록</button>
				        <button class="btn btn-warning mr-3" id="updateBtn">수정</button>
				        <button class="btn btn-danger" id="deleteBtn">삭제</button>
					</div>
				</div>			
				<div id="grid"></div>
			</div>
		</div>
	</div>
</body>
	<script th:inline="javascript">
	
	document.addEventListener('DOMContentLoaded', function() {
		
	    const grid = new tui.Grid({
	        el: document.getElementById('grid'),
	        scrollX: false,
	        scrollY: false,
	        columns: [
	            {
	                header: '자재코드',
	                name: 'mtCode',
	                align: 'center',
	                sortingType: 'desc',
	                sortable: true                
	            },
	            {
	                header: '자재이름',
	                name: 'mtName',
	                align: 'center',
	                sortingType: 'desc',
	                sortable: true                  
	            },
	            {
	                header: '자재구분',
	                name: 'materialType',
	                align: 'center',
	                sortingType: 'desc',
	                sortable: true                  
	            },
	            {
	                header: '규격',
	                name: 'specification',
	                align: 'center',
	                sortingType: 'desc',
	                sortable: true                  
	            },
	            {
	                header: '단위',
	                name: 'unit',
	                align: 'center',
	                sortingType: 'desc',
	                sortable: true                  
	            },
	            {
	                header: '단가',
	                name: 'unitPrice',
	                align: 'center',
	                sortingType: 'desc',
	                sortable: true                  
	            },
	            {
	                header: '안전재고',
	                name: 'safetyStock',
	                align: 'center',
	                sortingType: 'desc',
	                sortable: true                  
	            },
	            {
	                header: '재고코드',
	                name: 'stcCode',
	                align: 'center',
	                sortingType: 'desc',
	                sortable: true                  
	            },
	            {
	                header: '재고변동일',
	                name: 'updateDate',
	                align: 'center',
	                sortingType: 'desc',
	                sortable: true                  
	            },
	            {
	                header: '현재재고',
	                name: 'currentStc',
	                align: 'center',
	                sortingType: 'desc',
	                sortable: true                  
	            },
	            /*
	            {
	                header: '리드타임',
	                name: 'leadtime',
	                align: 'center',
	                sortingType: 'desc',
	                sortable: true                  
	            },
	            */
	            {
	                header: '비고',
	                name: 'comm',
	                align: 'center',
	                sortingType: 'desc',
	                sortable: true                  
	            },            
	            /*
	            {
	                header: '제품코드',
	                name: 'prdCode',
	                align: 'center',
	                sortingType: 'desc',
	                sortable: true                  
	            },
	            */
	        ],
	        rowHeaders: ['checkbox', 'rowNum'],
	        pageOptions: {
	            useClient: true,
	            perPage: 15
	        }
	    });

	    function fetchMtList(search = {}) {
	        const params = new URLSearchParams(search);
	        const url = `/mts?${params.toString()}`;

	        fetch(url)
	            .then(response => response.json())
	            .then(result => {
	                grid.resetData(result);
	            })
	            .catch(error => {
	                console.error(error);
	            });
	    }
	    
	    fetchMtList();

	});			
	</script>